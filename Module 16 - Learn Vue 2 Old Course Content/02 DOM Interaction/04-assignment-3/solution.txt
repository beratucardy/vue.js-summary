Solution code: https://jsfiddle.net/smax/jhj8cqdm/