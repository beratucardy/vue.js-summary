Solution code: https://jsfiddle.net/smax/9gtcb87t/